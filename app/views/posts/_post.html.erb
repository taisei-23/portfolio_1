<div class="border rounded p-4 mb-4 shadow-sm hover:shadow-md transition">
  <div class="flex items-center mb-2">
    <% if post.user.icon_image.attached? %>
      <%= image_tag post.user.icon_image.variant(resize_to_limit: [40, 40]), class: "rounded-full mr-2" %>
    <% else %>
      <%= image_tag "default_icon.png", class: "rounded-full mr-2", size: "40x40" %>
    <% end %>
    <span class="font-semibold"><%= post.user.name %></span>
    <span class="text-gray-500 text-sm ml-2"><%= post.created_at.strftime("%Y/%m/%d %H:%M") %></span>
  </div>

  <% if user_signed_in? && post.user == current_user %>
    <%= link_to edit_post_path(post), class: "block text-black hover:underline" do %>
      <h2 class="text-lg font-bold mb-1"><%= post.title %></h2>
      <p class="mb-2"><%= truncate(post.body, length: 100) %></p>
    <% end %>
  <% else %>
    <%= link_to post_path(post), class: "block text-black hover:underline" do %>
      <h2 class="text-lg font-bold mb-1"><%= post.title %></h2>
      <p class="mb-2"><%= truncate(post.body, length: 100) %></p>
    <% end %>
  <% end %>

  <% if post.image.attached? %>
    <div class="mb-2">
      <%= image_tag post.image.variant(resize_to_limit: [600, nil]), class: "w-full h-auto rounded" %>
    </div>
  <% end %>
</div>
